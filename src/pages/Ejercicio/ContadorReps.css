/* ContadorReps.css - Estilos para el contador de repeticiones */

.cr-container {
  /* Mobile-first: full width on small screens, centered on larger */
  width: 100%;
  max-width: 980px;
  margin: 0 auto;
  padding: 0.9rem 0.9rem;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  color: var(--text);
  box-sizing: border-box;
}

@media (min-width: 760px) {
  .cr-container { padding: 1.25rem 1rem; }
}

.cr-header {
  margin-bottom: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.cr-title {
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: 0.03em;
}

.cr-subtitle {
  font-size: 0.95rem;
  color: #64748b;
}

.cr-layout {
  /* Mobile-first: stacked layout */
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.cr-left-column {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Secciones / etiquetas */

.cr-section-label {
  font-size: 0.95rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: #64748b;
}

/* Selector ejercicios */

.cr-exercise-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 0.75rem;
}

.cr-exercise-card {
  border-radius: 1rem;
  padding: 0.75rem 0.9rem;
  border: 1px solid var(--card-border);
  background-color: var(--card-bg);
  display: flex;
  align-items: center;
  gap: 0.6rem;
  cursor: pointer;
  transition: background-color 0.15s ease, box-shadow 0.15s ease,
    transform 0.05s ease, border-color 0.15s ease;
  box-shadow: 0 2px 4px rgba(15, 23, 42, 0.04);
}

.cr-exercise-card--active {
  background-color: var(--surface);
  box-shadow: 0 8px 16px rgba(15, 23, 42, 0.1);
}

.cr-exercise-emoji {
  font-size: 1.25rem;
}

.cr-exercise-video-small {
  width: 64px;
  height: 48px;
  border-radius: 8px;
  overflow: hidden;
}
.cr-exercise-video-small {
  width: 96px;
  height: 64px;
  border-radius: 8px;
  overflow: hidden;
  position: relative;
}
.cr-exercise-video-small img,
.cr-exercise-video-small video {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
}

.cr-exercise-video {
  width: 160px;
  height: 100px;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}
.cr-exercise-video img,
.cr-exercise-video video {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
}

.cr-video-play-overlay {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  color: rgba(255,255,255,0.95);
  font-size: 20px;
  font-weight: 700;
  text-shadow: 0 2px 8px rgba(0,0,0,0.6);
  pointer-events: none;
}


.cr-exercise-name {
  font-size: 0.95rem;
  font-weight: 600;
}

.cr-exercise-selected {
  font-size: 0.75rem;
  color: #64748b;
}

/* Panel contador */

.cr-counter-panel {
  border-radius: 12px;
  /* lighter gradient to reduce perceived darkness */
  background: linear-gradient(135deg, var(--primary-variant), #12314a);
  padding: 12px;
  color: var(--on-primary);
  display: flex;
  flex-direction: column;
  gap: 10px;
  box-shadow: var(--elevated-shadow);
}

.cr-counter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.75rem;
}

.cr-chip-label {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: rgba(255,255,255,0.88);
  margin-bottom: 0.25rem;
}

.cr-counter-exercise {
  font-size: 1.1rem;
  font-weight: 600;
}

.cr-series-info {
  text-align: right;
  font-size: 0.8rem;
  color: rgba(255,255,255,0.9);
}

/* Círculo central */

.cr-counter-center {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0.75rem 0;
}

.cr-counter-circle {
  width: min(58vw, 170px);
  height: min(58vw, 170px);
  max-width: 220px;
  max-height: 220px;
  border-radius: 999px;
  border-width: 5px;
  border-style: solid;
  background: radial-gradient(circle at 30% 20%, #0b2238, #031021);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: 0 14px 36px rgba(2,6,23,0.5), inset 0 0 30px rgba(2,6,23,0.5);
}

.cr-reps-number {
  font-size: clamp(2.25rem, 8vw, 3.5rem);
  font-weight: 700;
  line-height: 1;
}

.cr-reps-label {
  font-size: 0.9rem;
  margin-top: 0.4rem;
  color: rgba(255,255,255,0.9);
}

.cr-reps-target {
  font-size: 0.75rem;
  margin-top: 0.15rem;
  color: #94a3b8;
}

/* Botones */

.cr-counter-buttons {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
  margin-top: 0.25rem;
}

.cr-btn {
  border-radius: 12px;
  padding: 0.8rem 0.9rem;
  font-size: 1rem;
  font-weight: 700;
  border: 1px solid transparent;
  cursor: pointer;
  transition: transform 0.08s ease, box-shadow 0.12s ease, background 0.15s ease, border-color 0.15s ease;
  min-height: 44px;
  color: var(--text);
  background: var(--card-bg);
  border: 1px solid var(--card-border);
}

.cr-btn-primary {
  background-color: var(--success);
  color: var(--on-primary);
  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.12);
}

.cr-btn-secondary {
  background-color: var(--card-bg);
  color: var(--text);
  border-color: var(--card-border);
}

.cr-btn-full {
  width: 100%;
  text-align: center;
  margin-top: 0.3rem;
  background: linear-gradient(135deg, rgba(15,23,42,1), rgba(15,23,42,0.95));
  color: #e5e7eb;
  border: 1px solid rgba(229,230,235,0.12);
}

/* Input objetivo */

.cr-target-row {
  margin-top: 0.1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.9rem;
  color: rgba(255,255,255,0.9);
}

.cr-target-input {
  width: 4rem;
  padding: 0.2rem 0.45rem;
  font-size: 0.95rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(255,255,255,0.12);
  background-color: rgba(255,255,255,0.06);
  color: var(--on-primary);
  text-align: center;
}

/* Añadir múltiples repeticiones */
.cr-add-multiple-row {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  margin-top: 0.5rem;
}

.cr-add-input {
  width: 5rem;
  padding: 0.3rem 0.5rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(255,255,255,0.12);
  background-color: rgba(255,255,255,0.06);
  color: var(--on-primary);
  text-align: center;
}

/* Timer styles */
.cr-timer-section {
  margin-top: 0.75rem;
  padding: 0.8rem;
  border-radius: 0.9rem;
  background: transparent;
  border: 1px solid rgba(0,0,0,0.04);
}

.cr-timer-section .cr-btn { min-width: 84px }

/* Badge for minutes remaining */
.cr-timer-badge {
  background: rgba(255,255,255,0.06);
  color: #e6eefc;
  padding: 6px 8px;
  border-radius: 999px;
  font-weight: 700;
}

/* Card para mostrar series completadas en la columna derecha */
.cr-series-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0.6rem 0.8rem;
  border-radius: 0.9rem;
  border: 1px solid var(--card-border);
  background: var(--card-bg);
  color: var(--text);
  box-shadow: 0 6px 18px rgba(15,23,42,0.06);
}

.cr-series-card-label {
  font-size: 0.8rem;
  color: #64748b;
}

.cr-series-card-value {
  font-size: 1.6rem;
  font-weight: 700;
  margin-top: 0.15rem;
}

/* Panel historial */

.cr-history-panel {
  border-radius: 1.25rem;
  padding: 1rem 1.1rem;
  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.06);
  display: flex;
  flex-direction: column;
  min-height: 220px;
  border: 1px solid var(--card-border);
  background-color: var(--card-bg);
}

.cr-history-description {
  font-size: 0.8rem;
  color: #94a3b8;
  margin-bottom: 0.5rem;
}

.cr-history-scroll {
  flex: 1;
  overflow-y: auto;
  padding-right: 0.1rem;
  margin-top: 0.25rem;
}

.cr-history-empty {
  font-size: 0.85rem;
  color: var(--muted);
  font-style: italic;
  margin-top: 0.5rem;
}

.cr-history-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.cr-history-item {
  border-radius: 0.9rem;
  padding: 0.45rem 0.6rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.8rem;
  border: 1px solid var(--card-border);
}

.cr-history-left {
  display: flex;
  align-items: center;
  gap: 0.45rem;
}

.cr-history-emoji {
  font-size: 1rem;
}

.cr-history-title {
  font-weight: 600;
  font-size: 0.82rem;
}

.cr-history-meta {
  font-size: 0.75rem;
  color: #64748b;
}

/* Responsive: switch to 2-column layout on wider screens */
@media (min-width: 769px) {
  .cr-layout { display: grid; grid-template-columns: 1.2fr 1fr; gap: 1.5rem; }
}

/* Make calendar and grids more compact on phones */
@media (max-width: 420px) {
  .cr-exercise-card { padding: 0.6rem; }
  .cr-exercise-name { font-size: 0.9rem }
  .cr-exercise-video-small { width: 72px; height: 48px }
}

/* Buscador de ejercicios */

.cr-exercise-search-row {
  margin-bottom: 0.5rem;
  display: flex;
}

.cr-exercise-search-input {
  width: 100%;
  padding: 0.5rem 0.7rem;
  border-radius: 0.75rem;
  border: 1px solid var(--card-border);
  font-size: 0.85rem;
  color: var(--text);
  background-color: var(--surface);
  outline: none;
  transition: border-color 0.15s ease, box-shadow 0.15s ease,
    background-color 0.15s ease;
}

.cr-exercise-search-input::placeholder {
  color: #94a3b8;
}

.cr-exercise-search-input:focus {
  border-color: var(--primary);
  background-color: var(--card-bg);
  box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.14);
}

/* Badges y descripción de ejercicio */

.cr-exercise-type-badge {
  margin-top: 0.15rem;
  font-size: 0.7rem;
  padding: 0.1rem 0.45rem;
  border-radius: 999px;
  background-color: #eff6ff;
  color: #1d4ed8;
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.cr-exercise-card--active .cr-exercise-type-badge {
  background-color: #e0f2fe;
  color: #0369a1;
}

.cr-exercise-description {
  margin-top: 0.2rem;
  font-size: 0.78rem;
  color: var(--muted);
  max-width: 28rem;
}

.cr-exercise-small-type {
  margin-top: 0.05rem;
  font-size: 0.72rem;
  color: #a5b4fc;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

/* Peso utilizado en ejercicios con carga */

.cr-weight-row {
  margin-top: 0.4rem;
  margin-bottom: 0.25rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.8rem;
  color: #cbd5f5;
}

.cr-weight-row .cr-target-input {
  width: 5rem;
}

/* Calendario de volumen */

.cr-volume-calendar {
  margin-top: 0.8rem;
  margin-bottom: 0.6rem;
  padding: 0.6rem 0.7rem;
  border-radius: 0.9rem;
  background-color: var(--surface);
  border: 1px solid var(--card-border);
}

.cr-volume-title {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 0.5rem;
}

/* Navegación del calendario */
.cr-calendar-nav {
  display: flex;
  gap: 6px;
}

.cr-calendar-nav button {
  border-radius: 8px;
  border: 1px solid var(--card-border);
  background: var(--card-bg);
  padding: 4px 8px;
  cursor: pointer;
  font-weight: 700;
}

.cr-calendar-nav button:disabled {
  opacity: 0.45;
  cursor: default;
}

.cr-volume-grid {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 0.25rem;
}

.cr-volume-day {
  border-radius: 0.6rem;
  padding: 0.25rem 0.3rem;
  min-height: 46px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  border: 1px solid rgba(148, 163, 184, 0.3);
  box-sizing: border-box;
}

.cr-volume-day-number {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text);
}

.cr-volume-day-volume {
  font-size: 0.7rem;
  color: var(--muted);
}

/* En móviles hacemos el calendario en 4 columnas para que no quede tan estrecho */
@media (max-width: 768px) {
  .cr-volume-grid {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
}

.cr-exercise-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 12px rgba(15, 23, 42, 0.12);
  border-color: #cbd5e1;
}

/* Video modal (opens on top of page) */
.cr-video-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(2,6,23,0.6);
  z-index: 10000;
  padding: 1rem;
}
.cr-video-modal-content {
  width: min(1200px, 96%);
  height: min(800px, 86%);
  background: #000;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  box-shadow: 0 30px 120px rgba(2,6,23,0.9);
}
.cr-video-modal-close {
  position: absolute;
  right: 10px;
  top: 10px;
  z-index: 2;
  background: rgba(255,255,255,0.08);
  border: none;
  color: var(--on-primary);
  font-size: 18px;
  padding: 8px 12px;
  border-radius: 10px;
  cursor: pointer;
}

/* Ensure modal content scales well on small screens */
@media (max-width: 640px) {
  .cr-video-modal-content {
    width: 96%;
    height: 60vh;
    border-radius: 8px;
  }
}

/* Bottom-sheet style for generic modals on small screens */
@media (max-width: 520px) {
  .cr-modal-backdrop { align-items: flex-end; padding: 0 8px 8px 8px }
  .cr-modal { width: 100%; border-bottom-left-radius: 0; border-bottom-right-radius: 0; border-top-left-radius: 12px; border-top-right-radius: 12px; max-height: 86vh; overflow:auto }
  .cr-modal .cr-modal-header { padding: 12px 14px }
  .cr-modal .cr-modal-body { padding: 12px }
}

/* Modal fallback styles: ensure generic modal classes used across components
   are always interactive and on top of other UI layers. This fixes cases
   where selects inside the modal cannot be opened because of stacking. */
.cr-modal-backdrop {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(15, 23, 42, 0.55);
  z-index: 11000;
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
  pointer-events: auto;
}

.cr-modal {
  position: relative;
  z-index: 11001;
  background: rgba(255,255,255,0.98);
  border-radius: 12px;
  box-shadow: 0 28px 70px rgba(15, 23, 42, 0.36);
  overflow: visible;
}

/* Ensure native select dropdowns and their options render above other overlays */
.cr-select {
  -webkit-appearance: menulist;
  appearance: menulist;
  position: relative;
  z-index: 10002;
}
